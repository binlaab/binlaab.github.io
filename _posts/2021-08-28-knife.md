Knife es una máquina linux de nivel fácil, creada por [MrKN16H7](https://app.hackthebox.eu/users/98767), en la que vamos a explotar un bug de PHP para conseguir una RCE
y ejecutar un binario como root para convertirnos en él.

![imagen](https://user-images.githubusercontent.com/71317374/131216908-df335eaa-0496-43e5-bc76-2d77ec7be9f9.png)

Según los seres vivos que hay por HackTheBox, la máquina es así:

![imagen](https://user-images.githubusercontent.com/71317374/131216886-9c9c8b8e-6fef-4467-914f-d108e367b3d5.png)

Muy CTF(y es así)

1 - [Reconocimiento inicial](#recon)
2 - [Reconocimiento profundo](#deeprecon)

# [Reconocimiento inicial] {#recon}

```bash
# Nmap 7.92 scan initiated Fri Aug 27 20:20:39 2021 as: nmap -p- --open --min-rate 3000 -sS -Pn -n -v 10.10.10.242 -oG ports -oN ports.nmap
Nmap scan report for 10.10.10.242
Host is up (0.30s latency).
Not shown: 51068 closed tcp ports (reset), 14465 filtered tcp ports (no-response)
Some closed ports may be reported as filtered due to --defeat-rst-ratelimit
PORT   STATE SERVICE
22/tcp open  ssh
80/tcp open  http

Read data files from: /usr/bin/../share/nmap
# Nmap done at Fri Aug 27 20:21:14 2021 -- 1 IP address (1 host up) scanned in 34.80 seconds
```

### Pequeña explicación de los parámetros de nmap
* -p-: Escanea todos los puertos.
* --open: Solo muestra los que están abiertos.
* --min-rate: Envía un mínimo de paquetes por segundo para que vaya más rápido, con un número muy alto, como 10000, puede dar falsos positivos o negativos. 
* -sS: TCP SYN Port Scan, agiliza un poco el escaneo ya que no espera a que se complete el [Three-Way Handshake](https://networksigma.com/tcp-3-way-handshake/).
* -Pn: Deshabilita el descubrimiento de host mediante pings a la máquina para comprobar si está activa.
* -n: Deshabilita la resolución DNS
* -v: Muestra los puertos a medida que los descubre
* -oG: Guarda el escaneo de nmap en diferentes formatos, -oG lo guarda en formato grepeable, para luego usar la [función extractPorts de s4vitar](https://pastebin.com/tYpwpauW)
* -oN: Guarda el escaneo como aparece por consola.

Los puertos abiertos son el 22, para obtener una shell segura(SSH), y 80, que hostea un servidor HTTP.

# Reconocimiento profundo {deeprecon}
